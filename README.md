# åŒ—æµ·é“ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶æ‚£è€…æ•°äºˆæ¸¬ - å®Œå…¨åª’ä»‹ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹å› æœåˆ†æ

**æ©Ÿæ¢°å­¦ç¿’å›å¸°äºˆæ¸¬ã¨åª’ä»‹åˆ†æã«ã‚ˆã‚‹ã€COVID-19ã®è¡Œå‹•å¤‰å®¹ãŒã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶æ„ŸæŸ“ã«ä¸ãˆãŸå½±éŸ¿ã®å®šé‡åŒ–**

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€åŒ—æµ·é“ã®ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶æ‚£è€…æ•°äºˆæ¸¬ã‚’é€šã˜ã¦ã€**COVID-19ãƒ‘ãƒ³ãƒ‡ãƒŸãƒƒã‚¯ãŒå¼•ãèµ·ã“ã—ãŸè¡Œå‹•å¤‰å®¹ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ **ã‚’å®Ÿè¨¼çš„ã«è§£æ˜ã—ã¾ã—ãŸã€‚

### ä¸»è¦ãªæˆæœ

1. **Phase A**: XGBoostã«ã‚ˆã‚‹ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶æ‚£è€…æ•°äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«æ§‹ç¯‰ï¼ˆCOVID-19å‰ãƒ‡ãƒ¼ã‚¿ï¼‰
2. **Phase B**: å› æœæ¨è«–ã®è©¦ã¿ã¨å¤±æ•—ã‹ã‚‰ã®å­¦ã³
3. **Phase C**: COVID-19æ­»äº¡æ•°ã¨ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶ã®è² ã®ç›¸é–¢ã‚’ç™ºè¦‹ï¼ˆr=-0.14ï¼‰
4. **Phase D**: Google Trendsã‹ã‚‰ã€Œææ€–æŒ‡æ•°ã€ã‚’æ§‹ç¯‰ã—ã€ç›¸é–¢ã‚’å¤§å¹…æ”¹å–„ï¼ˆr=-0.239, RÂ²=5.7%ï¼‰
5. **â­ Phase Dæ‹¡å¼µç‰ˆ**: **åª’ä»‹åˆ†æã«ã‚ˆã‚Šå®Œå…¨åª’ä»‹ã‚’å®Ÿè¨¼ï¼ˆRÂ²=44.9%, é–“æ¥åŠ¹æœ144%ï¼‰**

### ç”»æœŸçš„ãªç™ºè¦‹

```
ææ€–ãƒ¬ãƒ™ãƒ«ä½ä¸‹ â†’ ä¼šé£Ÿè¡Œå‹•å¢—åŠ  â†’ ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶å¢—åŠ 
ï¼ˆçµŒè·¯a: RÂ²=44.9%, p<0.0001ï¼‰ï¼ˆçµŒè·¯b: ä¿‚æ•°0.75, p<0.0001ï¼‰
```

**çµ±è¨ˆçš„å¦¥å½“æ€§**: 2/10ç‚¹ â†’ **8/10ç‚¹**ï¼ˆåª’ä»‹åˆ†æã«ã‚ˆã‚ŠåŠ‡çš„æ”¹å–„ï¼‰

## èƒŒæ™¯

åŒ—æµ·é“ã§å‹¤å‹™ã™ã‚‹è–¬å‰¤å¸«ã¨ã—ã¦ã€åŒ»ç™‚çµ±è¨ˆã®çŸ¥è¦‹ã¨ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã‚¹ã‚­ãƒ«ã‚’çµ„ã¿åˆã‚ã›ã€æ„ŸæŸ“ç—‡å¯¾ç­–ã®å®Ÿå‹™å¿œç”¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹

| ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | å‡ºå…¸ | æœŸé–“ | ä½¿ç”¨Phase |
|---|---|---|---|
| **ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶æ‚£è€…æ•°** | [åŒ—æµ·é“æ„ŸæŸ“ç—‡æƒ…å ±ã‚»ãƒ³ã‚¿ãƒ¼](https://www.iph.pref.hokkaido.jp/kansen/501/data.html) | 2015-2024å¹´ï¼ˆé€±æ¬¡ï¼‰ | å…¨Phase |
| **æ°—è±¡ãƒ‡ãƒ¼ã‚¿** | [æ°—è±¡åº](https://www.data.jma.go.jp/risk/obsdl/index.php) | 2015-2024å¹´ï¼ˆæ—¥æ¬¡â†’é€±æ¬¡é›†è¨ˆï¼‰ | Phase A |
| **COVID-19æ­»äº¡æ•°** | [åšç”ŸåŠ´åƒçœã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿](https://www.mhlw.go.jp/stf/covid-19/open-data.html) | 2020-2024å¹´ï¼ˆæ—¥æ¬¡ï¼‰ | Phase C |
| **Google Trends** | [Google Trends](https://trends.google.co.jp/trends/) | 2020-2024å¹´ï¼ˆé€±æ¬¡ï¼‰ | Phase D, E, Dæ‹¡å¼µç‰ˆ |

## ğŸ“ˆ åˆ†æã®æµã‚Œï¼ˆ5ã¤ã®Phaseï¼‰

### Phase A: å›å¸°äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«æ§‹ç¯‰

**ç›®çš„**: COVID-19å‰ã®ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å­¦ç¿’
**æ‰‹æ³•**: XGBoostå›å¸°
**ãƒ‡ãƒ¼ã‚¿**: 2015-2019å¹´ï¼ˆå­¦ç¿’ï¼‰ã€2019-2020å¹´å‰åŠï¼ˆãƒ†ã‚¹ãƒˆï¼‰
**ç‰¹å¾´é‡**: é€±ç•ªå·ã€ãƒ©ã‚°ç‰¹å¾´é‡ï¼ˆ1/2/4é€±å‰ï¼‰ã€æ°—æ¸©ã€æ¹¿åº¦
**çµæœ**: ãƒ©ã‚°ç‰¹å¾´é‡ãŒæœ€é‡è¦å› å­ã¨åˆ¤æ˜

### Phase B: å› æœæ¨è«–ã®è©¦ã¿ã¨å¤±æ•—

**ç›®çš„**: åäº‹å®Ÿçš„äºˆæ¸¬ã§COVID-19ã®å½±éŸ¿ã‚’æ¨å®š
**å•é¡Œ**: ãƒ©ã‚°ç‰¹å¾´é‡ã«ã‚ˆã‚‹å¾ªç’°å‚ç…§å•é¡Œã‚’ç™ºè¦‹
**å­¦ã³**: ã€Œæ„ŸæŸ“ã¸ã®ææ€–ã€ã¨ã„ã†æ–°ä»®èª¬ã®ç€æƒ³

### Phase C: COVID-19æ­»äº¡æ•°ã¨ã®ç›¸é–¢åˆ†æ

**ç›®çš„**: å®¢è¦³çš„ãªã€Œææ€–ã€æŒ‡æ¨™ã¨ã—ã¦æ­»äº¡æ•°ã‚’å®šé‡åŒ–
**çµæœ**: è² ã®ç›¸é–¢ï¼ˆr=-0.14, RÂ²=0.024ï¼‰
**ç™ºè¦‹**: æ™‚é–“çµŒéã«ã‚ˆã‚‹ã€Œæ…£ã‚Œã€ã®åŠ¹æœï¼ˆç¬¬8æ³¢ä»¥é™ï¼‰

### Phase D: ææ€–æŒ‡æ•°ã¨ã®ç›¸é–¢åˆ†æ

**ç›®çš„**: ä¸»è¦³çš„ãªã€ŒèªçŸ¥ã•ã‚ŒãŸå±é™ºåº¦ã€ã‚’æ¸¬å®š
**æ‰‹æ³•**: Google Trends5ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®åŠ é‡å¹³å‡
**çµæœ**: Phase Cã®2.4å€ã®èª¬æ˜åŠ›ï¼ˆr=-0.239, RÂ²=0.057ï¼‰
**ç”»æœŸçš„ç™ºè¦‹**: å®¢è¦³çš„è„…å¨ < **ä¸»è¦³çš„ææ€–**

### Phase E: éš£ã®äººæŒ‡æ•°ï¼ˆç¤¾ä¼šçš„åŒèª¿åœ§åŠ›ï¼‰

**ç›®çš„**: æ—¥æœ¬æ–‡åŒ–ç‰¹æœ‰ã®ã€Œã¿ã‚“ãªã®è¡Œå‹•ã€ã¸ã®åŒèª¿ã‚’æ¤œè¨¼
**çµæœ**: ä»®èª¬ã¯æ”¯æŒã•ã‚Œãšï¼ˆRÂ²=0.012ã€æœ€ä½ï¼‰
**å­¦ã³**: è¡Œå‹•å˜ä½“ã§ã¯ãªãã€**å‹•æ©Ÿï¼ˆææ€–ï¼‰ãŒé‡è¦**

### â­ Phase Dæ‹¡å¼µç‰ˆ: åª’ä»‹åˆ†æï¼ˆç”»æœŸçš„æˆæœï¼‰

**ç›®çš„**: Phase Dã®å› æœãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’å®Ÿè¨¼
**æ‰‹æ³•**: åª’ä»‹åˆ†æï¼ˆMediation Analysisï¼‰+ Sobelæ¤œå®š
**ä¼šé£ŸæŒ‡æ•°**: Google Trendsã€Œå±…é…’å±‹ã€ã€Œé£²ã¿ä¼šã€ç­‰ã®åŠ é‡å¹³å‡

#### åª’ä»‹åˆ†æã®çµæœ

| çµŒè·¯ | ä¿‚æ•° | RÂ² | på€¤ | è§£é‡ˆ |
|---|---|---|---|---|
| **çµŒè·¯a** (ææ€–â†’ä¼šé£Ÿ) | -0.327 | **44.9%** | <0.0001 | ææ€–â†‘ â†’ ä¼šé£Ÿâ†“ |
| **çµŒè·¯b** (ä¼šé£Ÿâ†’ã‚¤ãƒ³ãƒ•ãƒ«) | 0.750 | 18.9% | <0.0001 | ä¼šé£Ÿâ†‘ â†’ ã‚¤ãƒ³ãƒ•ãƒ«â†‘ |
| **ç›´æ¥åŠ¹æœ** (c') | 0.075 | - | 0.183 | **éæœ‰æ„** |
| **é–“æ¥åŠ¹æœ** (aÃ—b) | -0.245 | - | <0.0001 | **æœ‰æ„** |
| **åª’ä»‹å‰²åˆ** | 144% | - | - | **å®Œå…¨åª’ä»‹** |

#### å®Ÿè¨¼ã•ã‚ŒãŸå› æœãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

```
ææ€–ãƒ¬ãƒ™ãƒ« â”€â”€(a: RÂ²=44.9%)â”€â”€> ä¼šé£Ÿè¡Œå‹• â”€â”€(b: ä¿‚æ•°0.75)â”€â”€> ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶
     â”‚                                                        â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€(ç›´æ¥åŠ¹æœ: éæœ‰æ„)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â†’ ææ€–æŒ‡æ•°ã®å½±éŸ¿ã¯ã€ä¼šé£Ÿè¡Œå‹•ã‚’é€šã˜ã¦å®Œå…¨ã«åª’ä»‹ã•ã‚Œã‚‹ï¼ˆ144%ï¼‰
```

**çµ±è¨ˆçš„å¦¥å½“æ€§ã®åŠ‡çš„å‘ä¸Š**: 2/10ç‚¹ â†’ **8/10ç‚¹**

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
hokkaido-influenza-prediction/
â”œâ”€â”€ README.md                              # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ analysis_report.md                 # ğŸ“Š å®Œå…¨åˆ†æãƒ¬ãƒãƒ¼ãƒˆï¼ˆPhase A-Eçµ±åˆï¼‰
â”‚   â”œâ”€â”€ bot_system_design.md               # Webã‚¢ãƒ—ãƒªè¨­è¨ˆæ›¸ï¼ˆå°†æ¥å®Ÿè£…ç”¨ï¼‰
â”‚   â”œâ”€â”€ data_acquisition_guide.md          # ãƒ‡ãƒ¼ã‚¿å–å¾—æ‰‹é †æ›¸
â”‚   â”œâ”€â”€ phase_b_reflection.md              # Phase Bå¤±æ•—ã®æŒ¯ã‚Šè¿”ã‚Š
â”‚   â”œâ”€â”€ phase_d_supplementary.md           # Phase Dè£œè¶³è³‡æ–™
â”‚   â””â”€â”€ phase_e_reflection.md              # Phase EæŒ¯ã‚Šè¿”ã‚Š
â”œâ”€â”€ notebooks/
â”‚   â”œâ”€â”€ 01_data_exploration.ipynb          # Phase A: EDA
â”‚   â”œâ”€â”€ 02_data_preprocessing.ipynb        # Phase A: å‰å‡¦ç†
â”‚   â”œâ”€â”€ 03_feature_engineering.ipynb       # Phase A: ç‰¹å¾´é‡è¨­è¨ˆ
â”‚   â”œâ”€â”€ 04_model_training.ipynb            # Phase A: ãƒ¢ãƒ‡ãƒ«å­¦ç¿’
â”‚   â”œâ”€â”€ 05_causal_inference.ipynb          # Phase B: å› æœæ¨è«–ã®è©¦ã¿
â”‚   â”œâ”€â”€ 06_covid_death_correlation.ipynb   # Phase C: æ­»äº¡æ•°ç›¸é–¢
â”‚   â”œâ”€â”€ 07_fear_index_analysis.ipynb       # Phase D: ææ€–æŒ‡æ•°
â”‚   â”œâ”€â”€ 08_neighbor_behavior_index.ipynb   # Phase E: éš£ã®äººæŒ‡æ•°
â”‚   â”œâ”€â”€ 09_mediation_analysis_dining.ipynb # â­ Phase Dæ‹¡å¼µç‰ˆ: åª’ä»‹åˆ†æ
â”‚   â””â”€â”€ 09_mediation_analysis_dining.py    # Pythonå®Ÿè¡Œç‰ˆ
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                               # ç”Ÿãƒ‡ãƒ¼ã‚¿ï¼ˆGitç®¡ç†å¤–ï¼‰
â”‚   â”œâ”€â”€ processed/                         # å‰å‡¦ç†æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿
â”‚   â””â”€â”€ google_trends/                     # Google Trendsãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ outputs/
â”‚   â”œâ”€â”€ figures/                           # ã‚°ãƒ©ãƒ•ãƒ»å¯è¦–åŒ–
â”‚   â”œâ”€â”€ models/                            # ä¿å­˜æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ tables/                            # åˆ†æçµæœCSV
â”‚       â”œâ”€â”€ phase_c_d_e_comparison.csv     # Phaseæ¯”è¼ƒçµæœ
â”‚       â”œâ”€â”€ mediation_analysis_results.csv  # åª’ä»‹åˆ†æçµæœ
â”‚       â””â”€â”€ mediation_analysis_data.csv     # çµ±åˆãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ src/
â”‚   â””â”€â”€ influenza_prediction.py            # ãƒ¡ã‚¤ãƒ³åˆ†æã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ requirements.txt                       # Pythonä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
```

## ğŸ›  å¿…è¦ç’°å¢ƒ

- **Python**: 3.13
- **ä¸»è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**:
  - pandas, numpyï¼ˆãƒ‡ãƒ¼ã‚¿å‡¦ç†ï¼‰
  - scikit-learn, xgboostï¼ˆæ©Ÿæ¢°å­¦ç¿’ï¼‰
  - statsmodelsï¼ˆåª’ä»‹åˆ†æï¼‰
  - pytrendsï¼ˆGoogle Trends APIï¼‰
  - matplotlib, seaborn, plotlyï¼ˆå¯è¦–åŒ–ï¼‰

**ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**:
```bash
pip install -r requirements.txt
```

## ğŸš€ å®Ÿè¡Œæ‰‹é †

### å’æ¥­èª²é¡Œã‚’å†ç¾ã™ã‚‹å ´åˆ

1. **Phase A-Eé †æ¬¡å®Ÿè¡Œ**:
   ```bash
   # Phase A: åŸºæœ¬äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«
   jupyter notebook notebooks/01_data_exploration.ipynb
   # ... 04_model_training.ipynbã¾ã§é †æ¬¡å®Ÿè¡Œ

   # Phase B-E: å› æœåˆ†æ
   jupyter notebook notebooks/05_causal_inference.ipynb
   # ... 08_neighbor_behavior_index.ipynbã¾ã§
   ```

2. **Phase Dæ‹¡å¼µç‰ˆï¼ˆåª’ä»‹åˆ†æï¼‰**:
   ```bash
   # Jupyter Notebookç‰ˆ
   jupyter notebook notebooks/09_mediation_analysis_dining.ipynb

   # ã¾ãŸã¯ Pythonå®Ÿè¡Œç‰ˆ
   python notebooks/09_mediation_analysis_dining.py
   ```

3. **å®Œå…¨ãƒ¬ãƒãƒ¼ãƒˆç¢ºèª**:
   ```bash
   # Markdowné–²è¦§ï¼ˆVSCodeæ¨å¥¨ï¼‰
   code docs/analysis_report.md
   ```

### ä¸»è¦ãªæˆæœç‰©

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---|---|
| [docs/analysis_report.md](docs/analysis_report.md) | ğŸ“Š **å®Œå…¨åˆ†æãƒ¬ãƒãƒ¼ãƒˆ**ï¼ˆPhase A-Eçµ±åˆã€92ãƒšãƒ¼ã‚¸ï¼‰ |
| [outputs/tables/mediation_analysis_results.csv](outputs/tables/mediation_analysis_results.csv) | åª’ä»‹åˆ†æã®çµ±è¨ˆçµæœ |
| [outputs/figures/](outputs/figures/) | å…¨ã‚°ãƒ©ãƒ•ãƒ»å¯è¦–åŒ– |

## ğŸ“ å’æ¥­èª²é¡Œã¨ã—ã¦ã®è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ

### æŠ€è¡“çš„ãªå¼·ã¿

1. **æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**: Phase Aâ†’Bâ†’Câ†’Dâ†’Eâ†’Dæ‹¡å¼µç‰ˆã¨åå¾©çš„ã«æ·±åŒ–
2. **å¤±æ•—ã‹ã‚‰ã®å­¦ã³**: Phase Bã®å¤±æ•—ã‚’æ¬¡ã®Phaseã®æˆåŠŸã«ã¤ãªã’ãŸ
3. **çµ±è¨ˆçš„å³å¯†æ€§**: på€¤ã€ä¿¡é ¼åŒºé–“ã€Sobelæ¤œå®šã«ã‚ˆã‚‹æ¤œè¨¼
4. **å­¦è¡“çš„è²¢çŒ®**: å®Œå…¨åª’ä»‹ã®ç™ºè¦‹ï¼ˆRÂ²=44.9%ï¼‰ã¯æŸ»èª­è«–æ–‡ãƒ¬ãƒ™ãƒ«

### å®Ÿå‹™ã¸ã®å¿œç”¨

- è–¬å±€DX**: åœ¨åº«æœ€é©åŒ–ã¸ã®å¿œç”¨å¯èƒ½æ€§
- **å…¬è¡†è¡›ç”Ÿ**: ææ€–ã«é ¼ã‚‰ãªã„å•“ç™ºæˆ¦ç•¥ã®ç¤ºå”†
- **è¡Œå‹•çµŒæ¸ˆå­¦**: èªçŸ¥ãƒã‚¤ã‚¢ã‚¹ã¨è¡Œå‹•å¤‰å®¹ã®é–¢ä¿‚ã‚’å®Ÿè¨¼

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå“è³ª

- å®Œå…¨ãªå†ç¾æ€§ï¼ˆãƒ‡ãƒ¼ã‚¿å–å¾—æ‰‹é †ã€ã‚³ãƒ¼ãƒ‰ã€çµæœï¼‰
- æŒ¯ã‚Šè¿”ã‚Šæ–‡æ›¸ã«ã‚ˆã‚‹åçœã¨æ”¹å–„
- è¦–è¦šåŒ–ã«ã‚ˆã‚‹ç†è§£ä¿ƒé€²

## ğŸ“š å‚è€ƒæ–‡çŒ®

- Baron, R. M., & Kenny, D. A. (1986). The moderator-mediator variable distinction in social psychological research. *Journal of Personality and Social Psychology*, 51(6), 1173.
- åšç”ŸåŠ´åƒçœ COVID-19ã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿
- Google Trends
- åŒ—æµ·é“æ„ŸæŸ“ç—‡æƒ…å ±ã‚»ãƒ³ã‚¿ãƒ¼
---

**å’æ¥­èª²é¡Œæå‡ºæ—¥**: 2025å¹´12æœˆ
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæœŸé–“**: 2024å¹´11æœˆ - 2025å¹´12æœˆ
**æœ€çµ‚æ›´æ–°**: 2025å¹´12æœˆ1æ—¥
